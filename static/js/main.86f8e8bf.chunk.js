(this["webpackJsonpbejee-test-task"]=this["webpackJsonpbejee-test-task"]||[]).push([[0],{29:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZUlEQVQ4y2NgGAWjYBSggaqGu5FA/BOIv2PBIPFEUgxjB+IdQPwfC94HxLykus4GiD+hGfQOiB3J8SojEE9EM2wuSJzcsFMG4ttQgx4DsRalkZENxL+AuJQaMcsGxBOAmGvopk8AVz1sLZgg0bsAAAAASUVORK5CYII="},30:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAZ0lEQVQ4y2NgGLKgquEuFxBPAGI2ahhWCsS/gDibUoO0gPgxEP8H4ttArEyuQYxAPBdqEAxPBImTY5gjEL9DM+wTENuQahAvEO9DMwiGdwAxOymGJQLxTyD+jgWDxCMZRsEoGAVoAADeemwtPcZI2wAAAABJRU5ErkJggg=="},31:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAEEklEQVR4nO2bSYgUVxjHfzPtuBt1cEEdTfAwgnoybsxBZPAQF1AGB0UFVxAUFRcMYg4qogfRy6AiIREUUQzERBGX0UuMggtuuK+oiaJExcg40XZsD9+U71XbU1Wt/VVZnf5BQdP9r57//1VNvfe+9xoKFChQoECB/y2JqA140AooA94AyYi9hEYJsAS4BqQaj3fAGWAqUBSdNX06A6cxwTMdB4HWURnUJAH8iXd459gTkUdV5hIsvHOMjsamDu2BJ2TXAL9G4lSJtWQXPgXcj8SpAh2BV2TfAM9yZaA4V1/0ibQEmn/CeY9yZSDqBngETAAeZnneEQUvkdIWWAPU43/7J4HyaGzq0xPYhncDbIzMXY5oBxwALgMDm9BUAhf5OPxzZMQYa9ZjAm320DUD5gD/WPpF6u6UKQdeYwJVBTinFFiGhI/6of3Z7MeEP0aez+7SGYEJ3wB8G62dcCkBrmAaYIuPfghwA+nv2+haC4cFBH+SlyA9hKMfpe5OmU7I2N0JtNBHP9/Svmg8P9ZswgS6ilzhpijF3e0tVnenTF9k6OoEGumj32xpbwItVN2FwCFMoH0+2n64Gyv2VZ8qTJjXQB8f/WFLX6trTZ/mSDfmBFrnox9vaZPI3RBrlmECPUbqfk3RErhj6Teou1OmK9J9OYFm+eh/sLRPkZ4g1mzFBDqL9/JbD+ClpZ+t7k6ZAcg43wk0zEe/3dJeQqbAsaUI+AMTaKePfiiy7ufoh2uaC4PJmDCvgK89tEXASUu/W92dMq2Ae5hAK3z00yxtPfCNnrVwWIkJ9ADvKWxb4G9Lv0rdnTJlQB0m0EQfvb0U9hd5MN/fhQl0HO8yV2/ctf/J6u6UqcA8yRuAQT763zDhTxDzmmAxcAoT6EcffaWlbQAGq7oLgZmYQP8C3Ty0CdwLHT+ru1OmHbKg6QRa4qOfR/DGigV2t3cL78pNR9xlru/V3SlTinu2N9ZHX0PwxooFyzGBTuH9JE8vc41TdxcC1wl+9WstbezLXCDL2Xalx2v6Os7SJoH+6u5CYCnBNip8hXtyVKNvLRz2YUJVe+h+snRPyIMyl8NdTLCyJjSzLU2QyVFsSCBb11PAf2R++o+xNCngl9DchUB3TLA7GT6vxr374zwy988b+mHCnbHeTwCrcRdD7wG9wjaoTQUm4NHG98qRrS72//x18jA8yEYFJ+ReZAKUvs/3KNAlKoPaTMI9n7eDJ5EJ0pf8G6SMZLMQ0cF6bW9XuwTMQH7ukk45MlzO5fa2d8DvyOKrTTFykQB2IBcmp9gLnimku1uJ927v22nn5Oq4leFvTbE+D1xrzOYOuG29PgdMBy5kcf4XSTYNsBsZ/BQjA5y3Ac75DhkJ5rL0XYdUotNxbvsgy3IfeA+10KdH3tUGNAAAAABJRU5ErkJggg=="},34:function(e,t,a){e.exports=a(48)},43:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),o=a(2),l=a(3),i=a(26),u=(a(43),a(13)),m=a(17),d=a(5),E=a.n(d),p=a(33),g=a(27),A=function(e){var t=e.children,a=Object(g.a)(e,["children"]),n=Object(o.c)((function(e){return e.adminToken}));return r.a.createElement(u.b,Object.assign({},a,{render:function(e){var a=e.location;e.match;return n?t:r.a.createElement(u.a,{to:{pathname:"/react-redux-pagination",state:{from:a}}})}}))},b=function(){var e,t,a,n,r,c=arguments;return E.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:"",t=c.length>1&&void 0!==c[1]?c[1]:{},a=c.length>2&&void 0!==c[2]?c[2]:{},s.prev=3,a=Object.entries(a).map((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];return"".concat(a,"=").concat(n)})).join("&"),e="https://uxcandy.com/~shapoval/test-task-backend/v2".concat(e,"/?developer=lenin&").concat(a),t.header={"Content-Type":"multipart/form-data"},s.next=9,E.a.awrap(fetch(e,t));case 9:return n=s.sent,s.next=12,E.a.awrap(n.json());case 12:return r=s.sent,s.abrupt("return",r);case 16:return s.prev=16,s.t0=s.catch(3),s.abrupt("return",s.t0);case 19:case"end":return s.stop()}}),null,null,[[3,16]])},f=function(e){return r.a.createElement(u.b,{path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({},t,{routes:e.routes}))}})},v=function(){return r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},h=function(e){var t=e.totalTasksCount,a=e.currentPage,n=void 0===a?1:a,c=Math.ceil(t/3),s=(n=parseInt(n))+3<=c?n+3:c,o=n-2;return r.a.createElement("div",null,r.a.createElement("nav",{"aria-label":"Page navigation"},r.a.createElement("ul",{className:"pagination justify-content-end"},r.a.createElement("li",{className:"page-item ".concat(n<=1?"disabled":"")},r.a.createElement(l.b,{className:"page-link",to:"/react-redux-pagination/page/1",href:"#"},"First page")),r.a.createElement("li",{className:"page-item ".concat(n<=1?"disabled":"")},r.a.createElement(l.b,{className:"page-link",href:"#",tabIndex:"-1",to:"/react-redux-pagination/page/".concat(n-1)},"Previous")),Object(m.a)(Array(s+1)).map((function(e,t){return 0!==t&&t>=o&&t<=s&&r.a.createElement("li",{key:t,className:"page-item ".concat(t===n?"disabled":"")},r.a.createElement(l.b,{to:"/react-redux-pagination/page/".concat(t),className:"page-link"},t))})),r.a.createElement("li",{className:"page-item ".concat(n===c?"disabled":"")},r.a.createElement(l.b,{className:"page-link",to:"/react-redux-pagination/page/".concat(n+1),href:"#"},"Next")),r.a.createElement("li",{className:"page-item ".concat(n===c?"disabled":"")},r.a.createElement(l.b,{className:"page-link",to:"/react-redux-pagination/page/".concat(c),href:"#"},"Last page")))))},x=function(e,t,a){var n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:n={sort_field:e.target.dataset.value,sort_direction:a&&"desc"===a.sort_direction?"asc":"desc"},t({type:"SET_SORT",sort:n});case 2:case"end":return r.stop()}}))},k=function(e,t){var a=new FormData;return Object.values(e.elements).forEach((function(e){var n=e.value||"Submit"!==e.textContent;if(!n||!e.hasAttribute("id"))return null;t&&a.append("token",t),a.append(e.id,n)})),a},T=function(){var e=Object(o.c)((function(e){return e.adminToken})),t=Object(o.b)();Object(u.g)();return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-sm bg-dark"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/react-redux-pagination",className:"nav-link"},"Main page")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/react-redux-pagination/add-task",className:"nav-link"},"Add task")),e?r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(e){return function(e,t){e({type:"SET_ADMIN",token:null}),window.location.reload()}(t)}},"Log out")):r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/react-redux-pagination/login",className:"nav-link"},"Log in")))))},y=a(9),N=a(29),O=a.n(N),S=a(30),M=a.n(S),j=a(31),w=a.n(j),D=function(e){var t=e.match,a=Object(o.b)(),c=Object(o.c)((function(e){return e.tasks})),s=Object(o.c)((function(e){return e.loading})),i=Object(o.c)((function(e){return e.currentSort})),u=Object(o.c)((function(e){return e.editedTask})),m=Object(o.c)((function(e){return e.adminToken}));return Object(n.useEffect)((function(){!function(){var e;E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"SET_LOADING"}),n.next=3,E.a.awrap(b("",{},Object(y.a)({},i,{page:"undefined"!==typeof t.params.id?t.params.id:1})));case 3:"ok"===(e=n.sent).status&&(a({type:"GET_TASK",task:e.message}),a({type:"SET_LOADING"}),i&&(document.querySelector("span[data-value='".concat(i.sort_field,"']")).style.backgroundImage="asc"===i.sort_direction?"url(".concat(O.a):"url(".concat(M.a)));case 5:case"end":return n.stop()}}))}()}),[a,t.params.id,i]),r.a.createElement("div",null,s?r.a.createElement(v,null):r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped text-center table-dark mt-5"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},r.a.createElement("span",{"data-value":"username",onClick:function(e){return x(e,a,i)}},"Username")),r.a.createElement("th",{scope:"col"},r.a.createElement("span",{"data-value":"email",onClick:function(e){return x(e,a,i)}},"Email")),r.a.createElement("th",null,r.a.createElement("span",null," Text ")),r.a.createElement("th",{scope:"col"},r.a.createElement("span",{"data-value":"status",onClick:function(e){return x(e,a,i)}},"Status")),m&&r.a.createElement("th",null,"Edit"))),r.a.createElement("tbody",null,c.totalTasks&&c.totalTasks.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.text),r.a.createElement("td",null,10===e.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e":"\u041d\u0435 \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e",u.includes(e.id)&&" | \u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0410\u0434\u043c\u0438\u043d\u043e\u043c"),m&&r.a.createElement("td",null,r.a.createElement("div",null,r.a.createElement(l.b,{to:{pathname:"/react-redux-pagination/edit/".concat(e.id),state:{postID:e.id,status:e.status,text:e.text}}},r.a.createElement("img",{src:w.a,alt:"edit icon"})))))})))),r.a.createElement(h,{totalTasksCount:c.totalTasksCount,currentPage:t.params.id})))},B=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.setMessage})),a=Object(o.c)((function(e){return e.adminToken})),c=Object(u.i)().id,s=Object(u.h)().state,l=Object(u.g)();return Object(n.useEffect)((function(){"null"===JSON.parse(localStorage.getItem("persist:root")).adminToken&&e({type:"SET_ADMIN",token:null})&&l.push("/react-redux-pagination")}),[a,l,e]),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return function(e,t,a,n,r){var c,s;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),c=k(e.target,n),o.next=4,E.a.awrap(b("/edit/".concat(t),{method:"post",body:c}));case 4:"ok"===(s=o.sent).status?(r.text!==c.get("text")&&a({type:"SET_EDITED_TASK",taskID:r.postID}),a({type:"SET_MESSAGE",message:{successMessage:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0430"}})):a({type:"SET_MESSAGE",message:{errorMessage:s.message.token}});case 6:case"end":return o.stop()}}))}(t,c,e,a,s)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"status"},"Status"),r.a.createElement("input",{type:"number",id:"status",pattern:"^(0|10)$",className:"form-control",min:"0",max:"10",step:"10",defaultValue:s?parseInt(s.status):""})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"text"},"Content"),r.a.createElement("textarea",{className:"form-control",id:"text",rows:"3",defaultValue:s?s.text:"",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),t&&r.a.createElement("div",{className:"mt-2 alert alert-".concat(t.errorMessage?"warning":"success"),role:"alert"},t.errorMessage?t.errorMessage:t.successMessage))},U=[{path:"/react-redux-pagination",exact:!0,component:D},{path:"/react-redux-pagination/add-task",component:function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.setMessage}));return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return function(e,t){var a,n;return E.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),a=k(e.target,null),r.next=4,E.a.awrap(b("/create",{method:"post",body:a}));case 4:"ok"===(n=r.sent).status?t({type:"SET_MESSAGE",message:{successMessage:"\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"}}):t({type:"SET_MESSAGE",message:{errorMessage:n.message.username}});case 6:case"end":return r.stop()}}))}(t,e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"text"},"Content"),r.a.createElement("textarea",{className:"form-control",id:"text",rows:"3",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),t&&r.a.createElement("div",{className:"mt-2 alert alert-".concat(t.errorMessage?"warning":"success"),role:"alert"},t.errorMessage?t.errorMessage:t.successMessage))}},{path:"/react-redux-pagination/login",component:function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.setMessage})),a=Object(u.g)();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return function(e,t,a){var n,r;return E.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),n=k(e.target),c.next=4,E.a.awrap(b("/login",{method:"post",body:n}));case 4:"ok"===(r=c.sent).status?(t({type:"SET_ADMIN",token:r.message.token}),a.push("/react-redux-pagination")):t({type:"SET_MESSAGE",message:{errorMessage:r.message.password}});case 6:case"end":return c.stop()}}))}(t,e,a)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",id:"username",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),t&&r.a.createElement("div",{className:"mt-2 alert alert-".concat(t.errorMessage?"warning":"success"),role:"alert"},t.errorMessage))}},{path:"/react-redux-pagination/page/:id",component:D},{path:"/react-redux-pagination/edit/:id",exact:!0,component:function(){return r.a.createElement(A,{path:"/react-redux-pagination/edit/:id"}," ",r.a.createElement(B,null)," ")}}],G=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(T,null),r.a.createElement(u.d,null,U.map((function(e,t){return r.a.createElement(f,Object.assign({key:t},e))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(12),C=a(22),_={tasks:{totalTasks:[],totalTasksCount:0},loading:!1,currentSort:null,adminToken:null,setMessage:null,editedTask:[]},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TASK":return Object(y.a)({},e,{tasks:Object(y.a)({},e.tasks,{totalTasks:t.task.tasks,totalTasksCount:t.task.total_task_count})});case"SET_LOADING":return Object(y.a)({},e,{loading:!e.loading});case"SET_SORT":return Object(y.a)({},e,{currentSort:t.sort});case"SET_ADMIN":return Object(y.a)({},e,{adminToken:t.token});case"SET_EDITED_TASK":return Object(y.a)({},e,{editedTask:[].concat(Object(m.a)(e.editedTask),[t.taskID])});case"SET_MESSAGE":return Object(y.a)({},e,{setMessage:Object(y.a)({},e.setMessage,{errorMessage:t.message.errorMessage,successMessage:t.message.successMessage})});default:return e}},P=a(32),Q={key:"root",storage:a.n(P).a,blacklist:["setMessage"]},F=Object(C.a)(Q,J),L=Object(I.c)(F,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),R=Object(C.b)(L);s.a.render(r.a.createElement(o.a,{store:L},r.a.createElement(i.a,{loading:null,persistor:R},r.a.createElement(l.a,null,r.a.createElement(G,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.86f8e8bf.chunk.js.map